## План внедрения автоматизированного тестирования формы покупки тура. 
## Два варианта: оплата картой, ввод данных карты для получения кредита.

### Перечень  автоматизируемых сценариев.

### Позитивные сценарии.
После перехода на главную страницу покупки тура тестируются две ветки.

#### Первая:
Ожидаемый результат - форма заполнена валидными данными, заявка успешно отправлена, в БД внесены данные о покупке.
1. Вариант с валидной картой(покупка должна быть одобрена банком)
 - Перходим по кнопке "Купить"
 - заполненяем форму валидными данными карты (номер карты:1111 2222 3333 4444, остальные поля - валидные данные в соотв. с назначением поля)
 - проверяем получение сообщения об успешной покупке. Проверяем корректность записи данных в БД об операции в соотв. таблицы.
2. Вариант с валидной картой (покупка должна быть отклонена банком)
- Перходим по кнопке "Купить"
- заполненяем форму валидными данными карты (номер карты:5555 6666 7777 8888, остальные поля - валидные данные в соотв. с назначением поля)
- проверяем получение сообщения об отказе. Проверяем корректность запись данных в БД об операции в соотв. таблицы.
3. Тестирование API. Отправка  POST запросов с данными. Резлуьтат: получение ответа  от сервиса
- Данные карты валидные(одобряется банком), все поля заполнен также валидными данными. Результат: статус ответа 200, операция одобрена.
- Данные карты валидные(отклоняется банком), все поля заполнены также валидными данными. Результат: статус ответа 200, операция не одобраена.
- Данные карты невалидные(любой номер карты кроме тех, что указаны выше), все поля заполнены также валидными данными. Результат: статус ответа 500.
#### Вторая:
- Те же тесты, что и выше только перходим по кнопке "Купить в кредит".
- Ожидаемый результат - форма заполнена валидными данными, заявка успешно отапрвлена, в БД внесены данные об одобрении кредита.
### Названия таблиц в БД и их заполнение
- order_entity - общая таблица по операциям (одобренным и неодобренным); поля credit_id и payment_id заполняется данными (id)  в зависимости от вида операции (кредит или покупка).
- credit_request_entity, payment_entity - отдельные таблицы по операциям (кредиты и покупки соответственно); в поле transaction_id заносится id операции (такой же что и в order_entity); в поле  status заносится информация отклонена или одобрена ли операция (APPROVED/DECLINED).

### Негативные сценарии.
Ожидаемый результат - форма заполнена невалидными данными, заявка не отпавлена, выводятся предупреждающие сообщения об ошибках в заполнении формы.
#### Сценарии тестирования формы заполнения данными карты (для  первой ветки "купить").
Каждое поле проверятся отдельно. Проверяется всплывающие сообщения о некорректности заполнения или пустом поле.
- Поле "номер карты"
  Варианты: пустое поле, одна цифра, ввод символов отличных от цифр.
- Поле  "месяц"
  Варианты: пустое, ввод значения не в пределах 01-12, ввод символов отличных от цифр.
- Поле "год"
  Врианты: пустое, ввод значения ранее текущего года, ввод символов отличных от цифр.
- Поле "владелец"
  Варианты: пустое, ввод кириллицей, ввод цифр.
- Поле "CVC/CVV"
  Врианты: пустое, ввод одной цифры, ввод символов отличных от цифр.

#### Перечень используемых инструментов
- JDK 11. Код тестов на  Java.
- IntelliJ IDEA. Среда подготовки авто-тестов.
- JUnit Jupiter. Фреймворк для тестирования.
- Gradle. Система сборки кода.
- Selenide. Продвинутый плагин для тестирования веб-интерфейса.
- Lombok. Плагин для минимизации строк кода за счет аннотаций.
- Faker.  Плагин для генерации данных.
- Github. Как репозиторий для хранения кода.
- Gradle. Инструмент для создания простых отчетов и анализа результатов авто-тестов.

### Перечень и описание возможных рисков при автоматизации
- Отсутсвие требований к полям формы.
- Отсутсвие спецификации к БД с инф. по таблицам, полям и значениям.
- Отсутсвие спецификации по запросам REST API. 

### Интервальная оценка с учётом рисков (в часах)
Ориентировочно оценка внедрения автоматизации  -  40 часов.

### План сдачи работ 
- автотесты - 05.08.2022
- результаты прогона -  06.08.22
- отчёт по автоматизации - 07.02.22
